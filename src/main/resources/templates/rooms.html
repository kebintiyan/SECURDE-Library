<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
                     xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Rooms</title>

    <link rel="stylesheet" type="text/css" th:href="@{/css/login.css}" />
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
    <link rel="stylesheet" th:href="@{/css/room_reservation_style.css}" />
    <script th:src="@{/js/jquery-3.2.1.min.js}"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>
    <script th:src="@{/js/room_reservation_script.js}"></script>

    <script th:inline="javascript">
        /*<![CDATA[*/

        var user = /*[[@{/rooms/reserve}]]*/ 'User Name';

        $(document).ready(function() {
            $("#reserve-btn").click(function () {
                console.log("RESERVE BTN CLICK");

                /*$.postJSON("chosenSlot", currentSlot, function(data){

                 });*/

                var url = window.location;

                $.ajax({
                    url : url + "/reserve",
                    type : "POST",
                    dataType: "json",
                    data : {
                        chosenSlot: currentSlot
                    }

                })
                    .done(function(result) {
                        console.log("success");

                        console.log(result);
                    })
                    .fail(function( jqXHR, textStatus, errorThrown ) {
                        console.log(jqXHR.responseText + " " + textStatus + " " + errorThrown);
                    });

            });
        });

        /*]]>*/
    </script>
</head>
<body>

    <div class = "row">
        <div class = "col-md-4 col-md-offset-1">
            <h1>Rooms</h1>
        </div>
    </div>

    <div class = "row">
        <div class = "col-md-10 col-md-offset-1">
            <table class = "table table-bordered">
                <tr>
                    <th>Room Number</th>
                    <th th:each="time : ${times}" th:text="${time}"></th>
                </tr>
                <tr th:each = "room : ${rooms}">
                    <th th:text="${room.name}"></th>
                    <td th:each="time : ${times}">
                        <div th:id = "${room.roomId} + '-' + ${time} + '-' + ${room.name}" class = "slot"></div>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <div class = "row">
        <div class = "col-md-4 col-md-offset-4 text-center">
            <b>Chosen Room and Time : </b> <span id = "displayCurrentSlot">None</span>
        </div>
    </div>

    <div class = "row">
        <div class = "col-md-2 col-md-offset-5 text-center">
            <button id = "reserve-btn" class="btn btn-primary btn-block" name="Submit" th:text="Reserve"></button>
        </div>
    </div>

    <a href="/rooms/reserve">TEST</a>

</body>
</html>